(this["webpackJsonpreact-context-map"]=this["webpackJsonpreact-context-map"]||[]).push([[0],{25:function(e,t,c){},26:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),o=c(7),s=c.n(o),r=c(5),i=c.n(r),l=c(8),u=c(4),j=c(3),d=c(6),p=c.n(d),b=c(1),O=a.a.createContext(null);function m(e,t){var c=t.type,n=t.payload;switch(c){case"UPDATE_LOCATION":return Object(j.a)(Object(j.a)({},e),{},{location:Object(j.a)({},n)});case"UPDATE_COORDS":return Object(j.a)(Object(j.a)({},e),{},{location:Object(j.a)(Object(j.a)({},e.location),{},{coords:Object(j.a)({},n.coords)})});case"UPDATE_CITY":return Object(j.a)(Object(j.a)({},e),{},{location:Object(j.a)(Object(j.a)({},e.location),n)});case"UPDATE_NAME":return Object(j.a)(Object(j.a)({},e),n);default:throw new Error}}function h(e){var t=e.children,c=Object(n.useReducer)(m,{name:"",location:{}}),a=Object(u.a)(c,2),o=a[0],s=a[1];return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition(function(){var e=Object(l.a)(i.a.mark((function e(t){var c,n,a,o,r,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.coords,n=c.latitude,a=c.longitude,e.next=3,fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(n,",").concat(a,"&key=AIzaSyD_tgpw_aI3elBJ3FQzH5kqi00Qep6jXxM"));case 3:return o=e.sent,e.next=6,o.json();case 6:r=e.sent,console.log(r.plus_code),l=[r.plus_code.compound_code.split(" ").slice(1,2)," ",r.plus_code.compound_code.split(" ").slice(2,3)],u=l.join("").substring(0,l.join("").length-1),s(p.a.updateLocation(u,{lat:n,lon:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){console.log("Couldn't get position!")}))}),[]),Object(b.jsx)(O.Provider,{value:{state:o,dispatch:s},children:t})}var x=function(){var e=Object(n.useContext)(O).state.name;return Object(b.jsx)("div",{style:{marginTop:"30px"},children:Object(b.jsxs)("h2",{className:"is-size-4",children:[Object(b.jsx)("strong",{children:"Name"}),": ",e]})})},f=c(10),v=(c(24),Object(f.c)({accessToken:"pk.eyJ1IjoianJqYWNrc28iLCJhIjoiY2s5ZzFvMmN2MGV0dzNtbzN4dGlqaGc1dCJ9.vUi9VvVM7kb2AoPYLVW89w"})),g=function(e){var t=e.lat,c=e.lon;return Object(b.jsx)(b.Fragment,{children:t&&c&&Object(b.jsx)(v,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"90vh",width:"100%",border:"1px solid black",marginTop:"1rem"},center:[c,t],zoom:[9],children:Object(b.jsx)(f.b,{type:"symbol",id:"marker",layout:{"icon-image":"marker-15"},children:Object(b.jsx)(f.a,{coordinates:[t,c]})})})})},y=function(){var e=Object(n.useContext)(O).state.location;return Object(b.jsx)("div",{children:Object(b.jsxs)("h2",{className:"is-size-4",children:[Object(b.jsx)("strong",{children:"Location"}),": ",e.city,Object(b.jsx)(g,Object(j.a)({},e.coords))]})})},N=function(){var e=Object(n.useContext)(O),t=e.state,c=t.name,a=t.location,o=e.dispatch,s=function(e){var t=Object(n.useState)(e),c=Object(u.a)(t,2),a=c[0],o=c[1];return Object(n.useEffect)((function(){var t=setTimeout((function(){o(e)}),2e3);return function(){clearTimeout(t)}}),[e]),a}(a.city);return Object(n.useEffect)(Object(l.a)(i.a.mark((function e(){var t,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=10;break}return console.log("Setting new location coords"),e.next=4,fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(s,"&key=AIzaSyD_tgpw_aI3elBJ3FQzH5kqi00Qep6jXxM"));case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,console.log(c),o(p.a.updateCoords({lat:c.results[0].geometry.location.lat,lon:c.results[0].geometry.location.lng}));case 10:case"end":return e.stop()}}),e)}))),[s]),Object(b.jsxs)("div",{className:"user-form",children:[Object(b.jsxs)("div",{className:"input-item",children:[Object(b.jsx)("label",{className:"label",children:"Update Name: "}),Object(b.jsx)("input",{className:"input",onChange:function(e){return o(p.a.updateName(e.target.value))},value:c})]}),Object(b.jsxs)("div",{className:"input-item",children:[Object(b.jsx)("label",{className:"label",children:"Update Location: "}),Object(b.jsx)("input",{className:"input",onChange:function(e){return o(p.a.updateCity(e.target.value))},value:a.city})]})]})};c(25);function C(){return Object(b.jsx)(h,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h2",{className:"is-size-4",children:"We'll use the React Context API with useReducer to create a Global Store with dispatch actions to pass and receive data in any component."}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(N,{}),Object(b.jsxs)("h2",{className:"is-size-4",children:["User Info Here"," ",Object(b.jsx)("span",{role:"img","aria-label":"point-down-label",children:"\ud83d\udc47"})]}),Object(b.jsx)("p",{children:"These two children components and their nested components can receive data."}),Object(b.jsx)(x,{}),Object(b.jsx)(y,{})]})]})})}var w=document.getElementById("root");s.a.render(Object(b.jsx)(C,{}),w)},6:function(e,t){var c="UPDATE_LOCATION",n="UPDATE_COORDS",a="UPDATE_CITY",o="UPDATE_NAME",s={updateLocation:function(e,t){return{type:c,payload:{city:e,coords:t}}},updateCoords:function(e){return{type:n,payload:{coords:e}}},updateCity:function(e){return{type:a,payload:{city:e}}},updateName:function(e){return{type:o,payload:{name:e}}}};e.exports=s}},[[26,1,2]]]);
//# sourceMappingURL=main.7460f973.chunk.js.map