{"version":3,"sources":["utils/GlobalState.js","Name.js","Map.js","Location.js","UserForm.js","utils/debounceLocation.js","index.js","utils/actions.js"],"names":["GlobalContext","React","createContext","reducer","state","type","payload","location","coords","Error","GlobalProvider","children","useReducer","name","dispatch","useEffect","navigator","geolocation","getCurrentPosition","a","lat","latitude","lon","longitude","fetch","response","json","data","console","log","plus_code","userCityArr","compound_code","split","slice","userCity","join","substring","length","actions","updateLocation","Provider","value","RandomComponent","useContext","style","marginTop","className","M","ReactMapboxGl","accessToken","Map","containerStyle","height","width","border","center","zoom","id","layout","coordinates","Location","city","Form","debouncedLocation","useState","setDebouncedLocation","timeoutId","setTimeout","clearTimeout","useDebounceLocation","updateCoords","results","geometry","lng","onChange","e","updateName","target","updateCity","App","UserForm","role","aria-label","Name","rootElement","document","getElementById","ReactDOM","render","TYPES","module","exports"],"mappings":"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","file":"static/js/main.7460f973.chunk.js","sourcesContent":["import React, { useEffect, useReducer, useState } from 'react';\r\nimport actions from './actions';\r\n\r\nconst GlobalContext = React.createContext(null);\r\n\r\nfunction reducer(state, { type, payload }) {\r\n  switch (type) {\r\n    case 'UPDATE_LOCATION':\r\n      return { ...state, location: { ...payload } };\r\n    case 'UPDATE_COORDS':\r\n      return {\r\n        ...state,\r\n        location: {\r\n          ...state.location,\r\n          coords: { ...payload.coords },\r\n        },\r\n      };\r\n    case 'UPDATE_CITY':\r\n      return {\r\n        ...state,\r\n        location: {\r\n          ...state.location,\r\n          ...payload,\r\n        },\r\n      };\r\n    case 'UPDATE_NAME':\r\n      return {\r\n        ...state,\r\n        ...payload,\r\n      };\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n\r\nfunction GlobalProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, { name: '', location: {} });\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      async ({ coords: { latitude: lat, longitude: lon } }) => {\r\n        const response = await fetch(\r\n          `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lon}&key=AIzaSyD_tgpw_aI3elBJ3FQzH5kqi00Qep6jXxM`\r\n        );\r\n        const data = await response.json();\r\n        console.log(data.plus_code);\r\n        const userCityArr = [\r\n          data.plus_code.compound_code.split(' ').slice(1, 2),\r\n          ' ',\r\n          data.plus_code.compound_code.split(' ').slice(2, 3),\r\n        ];\r\n        const userCity = userCityArr\r\n          .join('')\r\n          .substring(0, userCityArr.join('').length - 1);\r\n        dispatch(actions.updateLocation(userCity, { lat, lon }));\r\n      },\r\n      () => {\r\n        console.log(\"Couldn't get position!\");\r\n      }\r\n    );\r\n  }, []);\r\n  return (\r\n    <GlobalContext.Provider value={{ state, dispatch }}>\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n}\r\n\r\nexport { GlobalProvider, GlobalContext };\r\n","import React, { useContext } from \"react\";\nimport { GlobalContext } from \"./utils/GlobalState\";\n// This component displays name from Context\nconst RandomComponent = () => {\n  const {\n    state: { name }\n  } = useContext(GlobalContext);\n  \n  return (\n    <div style={{ marginTop: \"30px\" }}>\n      <h2 className=\"is-size-4\">\n        {/* Pass name from context here */}\n        <strong>Name</strong>: {name}\n      </h2>\n    </div>\n  );\n};\n\nexport default RandomComponent;\n","import React from 'react';\r\nimport ReactMapboxGl, { Layer, Feature, LngLat } from 'react-mapbox-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\n\r\nconst M = ReactMapboxGl({\r\n  accessToken:\r\n    'pk.eyJ1IjoianJqYWNrc28iLCJhIjoiY2s5ZzFvMmN2MGV0dzNtbzN4dGlqaGc1dCJ9.vUi9VvVM7kb2AoPYLVW89w',\r\n});\r\n\r\nexport const Map = ({ lat, lon }) => {\r\n  return (\r\n    <>\r\n      {lat && lon && (\r\n        <M\r\n          style=\"mapbox://styles/mapbox/streets-v9\"\r\n          containerStyle={{\r\n            height: '90vh',\r\n            width: '100%',\r\n            border: '1px solid black',\r\n            marginTop: '1rem',\r\n          }}\r\n          center={[lon, lat]}\r\n          zoom={[9]}\r\n        >\r\n          <Layer\r\n            type=\"symbol\"\r\n            id=\"marker\"\r\n            layout={{ 'icon-image': 'marker-15' }}\r\n          >\r\n            <Feature coordinates={[lat, lon]} />\r\n          </Layer>\r\n        </M>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { Map } from './Map';\r\nimport { GlobalContext } from './utils/GlobalState';\r\n// This component displays location from context\r\n\r\nconst Location = () => {\r\n  const {\r\n    state: { location },\r\n  } = useContext(GlobalContext);\r\n  return (\r\n    <div>\r\n      {/* Display user's location from Context */}\r\n      <h2 className=\"is-size-4\">\r\n        <strong>Location</strong>: {location.city}\r\n        <Map {...location.coords} />\r\n      </h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Location;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { useDebounceLocation } from './utils/debounceLocation';\r\nimport { GlobalContext } from './utils/GlobalState';\r\nimport actions from './utils/actions';\r\n\r\nconst Form = () => {\r\n  const {\r\n    state: { name, location },\r\n    dispatch,\r\n  } = useContext(GlobalContext);\r\n  const debouncedLocation = useDebounceLocation(location.city);\r\n  useEffect(async () => {\r\n    if (debouncedLocation) {\r\n      console.log('Setting new location coords');\r\n      const response = await fetch(\r\n        `https://maps.googleapis.com/maps/api/geocode/json?address=${debouncedLocation}&key=AIzaSyD_tgpw_aI3elBJ3FQzH5kqi00Qep6jXxM`\r\n      );\r\n      const data = await response.json();\r\n      console.log(data);\r\n      dispatch(\r\n        actions.updateCoords({\r\n          lat: data.results[0].geometry.location.lat,\r\n          lon: data.results[0].geometry.location.lng,\r\n        })\r\n      );\r\n    }\r\n  }, [debouncedLocation]);\r\n\r\n  return (\r\n    <div className=\"user-form\">\r\n      {/* Change user's name in context */}\r\n      <div className=\"input-item\">\r\n        <label className=\"label\">Update Name: </label>\r\n        <input\r\n          className=\"input\"\r\n          onChange={(e) => dispatch(actions.updateName(e.target.value))}\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      {/* Change user's location in context */}\r\n      <div className=\"input-item\">\r\n        <label className=\"label\">Update Location: </label>\r\n        <input\r\n          className=\"input\"\r\n          onChange={(e) => dispatch(actions.updateCity(e.target.value))}\r\n          value={location.city}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import { useEffect, useState } from 'react';\r\n\r\nconst useDebounceLocation = (value) => {\r\n  const [debouncedLocation, setDebouncedLocation] = useState(value);\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      setDebouncedLocation(value);\r\n    }, 2000);\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [value]);\r\n\r\n  return debouncedLocation;\r\n};\r\n\r\nexport { useDebounceLocation };\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Name from './Name';\r\nimport Location from './Location';\r\nimport UserForm from './UserForm';\r\nimport { GlobalProvider } from './utils/GlobalState';\r\nimport './styles.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <GlobalProvider>\r\n      <div className=\"App\">\r\n        <h2 className=\"is-size-4\">\r\n          We'll use the React Context API with useReducer to create a Global\r\n          Store with dispatch actions to pass and receive data in any component.\r\n        </h2>\r\n        <div className=\"container\">\r\n          <UserForm />\r\n\r\n          <h2 className=\"is-size-4\">\r\n            User Info Here{' '}\r\n            <span role=\"img\" aria-label=\"point-down-label\">\r\n              👇\r\n            </span>\r\n          </h2>\r\n          <p>\r\n            These two children components and their nested components can\r\n            receive data.\r\n          </p>\r\n          <Name />\r\n          <Location />\r\n        </div>\r\n      </div>\r\n    </GlobalProvider>\r\n  );\r\n}\r\n\r\n// Wrap parent component with context provider\r\nconst rootElement = document.getElementById('root');\r\nReactDOM.render(<App />, rootElement);\r\n","const TYPES = {\r\n  UPDATE_LOCATION: 'UPDATE_LOCATION',\r\n  UPDATE_COORDS: 'UPDATE_COORDS',\r\n  UPDATE_CITY: 'UPDATE_CITY',\r\n  UPDATE_NAME: 'UPDATE_NAME',\r\n};\r\n\r\nconst actions = {\r\n  updateLocation: (city, coords) => ({\r\n    type: TYPES.UPDATE_LOCATION,\r\n    payload: { city, coords },\r\n  }),\r\n  updateCoords: (coords) => ({\r\n    type: TYPES.UPDATE_COORDS,\r\n    payload: { coords },\r\n  }),\r\n  updateCity: (city) => ({\r\n    type: TYPES.UPDATE_CITY,\r\n    payload: { city },\r\n  }),\r\n  updateName: (name) => ({\r\n    type: TYPES.UPDATE_NAME,\r\n    payload: { name },\r\n  }),\r\n};\r\n\r\nmodule.exports = actions;\r\n"],"sourceRoot":""}